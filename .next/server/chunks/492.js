"use strict";exports.id=492,exports.ids=[492],exports.modules={1492:(e,t,a)=>{a.d(t,{Io:()=>i,N4:()=>c,P1:()=>o,XW:()=>y,Y:()=>p,dl:()=>l,p6:()=>u,sj:()=>s});var r=a(891),n=a(3007);function l(e,t,a=[],r=new Date().getFullYear()){let n=[];return t.forEach(t=>{let l=e.filter(e=>e.type===t.type&&new Date(e.startDate).getFullYear()===r).reduce((e,t)=>e+t.workingDays,0),i=a.filter(e=>e.type===t.type).reduce((e,t)=>e+t.days,0),s=t.yearlyQuota+i;n.push({type:t.type,total:s,used:l,remaining:Math.max(0,s-l),carryover:i})}),n}function i(e){let t={},a={cp:[],rtt:[],cet:[],sick:[]},r={cp:0,rtt:0,cet:0,sick:0};return e.forEach(e=>{t[e.year]||(t[e.year]=[]),t[e.year].push(e),a[e.type].push(e),r[e.type]+=e.days}),{byYear:t,byType:a,totalByType:r}}function s(e,t,a=new Date){let r=[],n=0,l=new Date(e);for(;l<=t;){let e=l.getMonth()+1,t=l.getFullYear(),i=function(e,t,a=new Date){let r=a.getMonth()+1,n=a.getFullYear();return t>n?{canTake:!1,reason:`Les RTT de ${t} ne sont pas encore disponibles`,availableDays:0}:t<n?{canTake:!0,availableDays:2}:e<r?{canTake:!0,availableDays:2}:e===r?{canTake:!0,availableDays:2}:{canTake:!0,availableDays:2,reason:`RTT disponible en pr\xe9vision pour ${t}`}}(e,t,a);r.push({month:e,year:t,available:i.availableDays,canTake:i.canTake}),n+=i.availableDays,l.setMonth(l.getMonth()+1)}return{totalAvailable:n,details:r}}function o(e,t,a=[],r=new Date().getFullYear()){let n=[],l=["Janvier","F\xe9vrier","Mars","Avril","Mai","Juin","Juillet","Ao\xfbt","Septembre","Octobre","Novembre","D\xe9cembre"],i=new Date,s=i.getMonth()+1,o=i.getFullYear(),u=t.find(e=>"rtt"===e.type)?.yearlyQuota||23,c=(t.find(e=>"cp"===e.type)?.yearlyQuota||25)+(t.find(e=>"cet"===e.type)?.yearlyQuota||5),y=a.find(e=>"rtt"===e.type)?.days||0,p=(a.find(e=>"cp"===e.type)?.days||0)+(a.find(e=>"cet"===e.type)?.days||0);n.push({month:0,monthName:"Reliquats",rtt:{real:{taken:0,cumul:0,remaining:y},forecast:{taken:0,cumul:0,remaining:y}},cp:{real:{taken:0,cumul:0,remaining:p},forecast:{taken:0,cumul:0,remaining:p}}});let f=0,g=0,d=0,m=0;for(let t=1;t<=12;t++){let a=e.filter(e=>{let a=new Date(e.startDate);return a.getFullYear()===r&&a.getMonth()===t-1}),i=r<o||r===o&&t<s,D=r===o&&t===s,h=a.filter(e=>"rtt"===e.type&&(!e.isForecast||i)).reduce((e,t)=>e+t.workingDays,0),k=a.filter(e=>"cp"===e.type&&(!e.isForecast||i)).reduce((e,t)=>e+t.workingDays,0),w=a.filter(e=>"rtt"===e.type&&(e.isForecast||!i&&!D)).reduce((e,t)=>e+t.workingDays,0),v=a.filter(e=>"cp"===e.type&&(e.isForecast||!i&&!D)).reduce((e,t)=>e+t.workingDays,0),M=Math.max(0,u+y-(f+=h)),F=Math.max(0,u+y-f-(g+=w)),b=Math.max(0,c+p-(d+=k)),T=Math.max(0,c+p-d-(m+=v));n.push({month:t,monthName:l[t-1],rtt:{real:{taken:h,cumul:f,remaining:M},forecast:{taken:w,cumul:g,remaining:F}},cp:{real:{taken:k,cumul:d,remaining:b},forecast:{taken:v,cumul:m,remaining:T}}})}return{months:n,yearlyTotals:{rtt:{real:f,forecast:g,total:f+g},cp:{real:d,forecast:m,total:d+m}}}}function u(e,t="dd/MM/yyyy"){let a="string"==typeof e?new Date(e):e;return isNaN(a.getTime())?(console.error("Invalid date for formatting:",e),"Date invalide"):(0,r.WU)(a,t,{locale:n.fr})}function c(e,t){let a=e.filter(e=>new Date(e.startDate).getFullYear()===t),n=a.reduce((e,t)=>e+t.workingDays,0),l={cp:0,rtt:0,cet:0,sick:0},i={};return a.forEach(e=>{l[e.type]+=e.workingDays;let t=new Date(e.startDate),a=(0,r.WU)(t,"yyyy-MM");i[a]=(i[a]||0)+e.workingDays}),{totalDays:n,byType:l,byMonth:i}}function y(e){if(!e||10!==e.length)return"";let t=e.split("/");if(3!==t.length)return"";let[a,r,n]=t;return`${n}-${r.padStart(2,"0")}-${a.padStart(2,"0")}`}function p(e){if(!e||10!==e.length)return!1;let t=e.split("/");if(3!==t.length)return!1;let[a,r,n]=t,l=new Date(`${n}-${r.padStart(2,"0")}-${a.padStart(2,"0")}`);return!isNaN(l.getTime())&&l.getFullYear()>=2020&&2030>=l.getFullYear()}}};