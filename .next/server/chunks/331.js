exports.id=331,exports.ids=[331],exports.modules={4233:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,2994,23)),Promise.resolve().then(a.t.bind(a,6114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,9671,23)),Promise.resolve().then(a.t.bind(a,1868,23)),Promise.resolve().then(a.t.bind(a,4759,23))},5413:(e,t,a)=>{Promise.resolve().then(a.bind(a,6246))},6246:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var r=a(326),s=a(7270),i=a.n(s),l=a(7577),n=a(381),o=a(6591),c=a(7202),d=a(1540),h=a(3685);function y(){let[e,t]=(0,l.useState)(!1),[a,s]=(0,l.useState)(!1),[i,n]=(0,l.useState)(null),y=async()=>{try{let e=await o.U0.exportData(),t=new Blob([e],{type:"application/json"}),a=URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download=`leave-tracker-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a),localStorage.setItem("leave-tracker-backup-date",new Date().toISOString()),n(new Date().toISOString())}catch(e){console.error("Export failed:",e)}};return e?r.jsx("div",{className:"fixed top-4 right-4 z-50 max-w-md bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg shadow-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[r.jsx(c.Z,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mt-0.5 flex-shrink-0"}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-sm font-semibold text-yellow-800 dark:text-yellow-200 mb-2",children:"\uD83D\uDCF1 Application D\xe9ploy\xe9e"}),(0,r.jsxs)("div",{className:"text-xs text-yellow-700 dark:text-yellow-300 space-y-2",children:[(0,r.jsxs)("p",{children:[r.jsx("strong",{children:"Important :"})," Cette application utilise le stockage local de votre navigateur."]}),(0,r.jsxs)("div",{className:"bg-yellow-100 dark:bg-yellow-900/30 p-2 rounded",children:[r.jsx("p",{className:"font-medium mb-1",children:"⚠️ Vos donn\xe9es sont stock\xe9es localement :"}),(0,r.jsxs)("ul",{className:"text-xs space-y-1",children:[r.jsx("li",{children:"• Pas de synchronisation entre appareils"}),r.jsx("li",{children:"• Perte possible si vous effacez les donn\xe9es du navigateur"}),r.jsx("li",{children:"• Exportez r\xe9guli\xe8rement vos donn\xe9es"})]})]}),!a&&(0,r.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/30 p-2 rounded",children:[r.jsx("p",{className:"font-medium mb-1",children:"\uD83D\uDCE5 Premi\xe8re utilisation :"}),r.jsx("p",{className:"text-xs",children:"Importez vos donn\xe9es existantes si vous en avez."})]}),i&&(0,r.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/30 p-2 rounded",children:[r.jsx("p",{className:"font-medium mb-1",children:"✅ Derni\xe8re sauvegarde :"}),r.jsx("p",{className:"text-xs",children:new Date(i).toLocaleDateString("fr-FR")})]})]}),(0,r.jsxs)("div",{className:"mt-3 flex flex-wrap gap-2",children:[(0,r.jsxs)("button",{onClick:y,className:"flex items-center px-2 py-1 bg-yellow-600 hover:bg-yellow-700 text-white text-xs rounded transition-colors",children:[r.jsx(d.Z,{className:"w-3 h-3 mr-1"}),"Exporter"]}),(0,r.jsxs)("label",{className:"flex items-center px-2 py-1 bg-blue-600 hover:bg-blue-700 text-white text-xs rounded transition-colors cursor-pointer",children:[r.jsx(h.Z,{className:"w-3 h-3 mr-1"}),"Importer",r.jsx("input",{type:"file",accept:".json",onChange:e=>{let a=e.target.files?.[0];if(!a)return;let r=new FileReader;r.onload=async e=>{try{let a=e.target?.result;await o.U0.importData(a),s(!0),t(!1),window.location.reload()}catch(e){console.error("Import failed:",e)}},r.readAsText(a)},className:"hidden"})]}),r.jsx("button",{onClick:()=>t(!1),className:"px-2 py-1 bg-gray-600 hover:bg-gray-700 text-white text-xs rounded transition-colors",children:"Fermer"})]})]})]})}):null}function u({children:e}){let[t,a]=(0,l.useState)(null),[s,o]=(0,l.useState)(!0);return s?r.jsx("html",{lang:"fr",children:r.jsx("body",{className:`${i().className} bg-gray-50 dark:bg-gray-900`,children:r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-500"})})})}):(0,r.jsxs)("html",{lang:"fr",className:t?.darkMode?"dark":"",children:[(0,r.jsxs)("head",{children:[r.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"}),r.jsx("meta",{name:"theme-color",content:t?.darkMode?"#1f2937":"#ffffff"}),r.jsx("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),r.jsx("meta",{name:"apple-mobile-web-app-status-bar-style",content:t?.darkMode?"black-translucent":"default"}),r.jsx("meta",{name:"format-detection",content:"telephone=no"}),r.jsx("meta",{name:"mobile-web-app-capable",content:"yes"})]}),(0,r.jsxs)("body",{className:`${i().className} bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-200`,children:[r.jsx("div",{className:"min-h-screen",children:e}),r.jsx(y,{}),r.jsx(n.x7,{position:"top-right",toastOptions:{duration:4e3,style:{background:t?.darkMode?"#374151":"#ffffff",color:t?.darkMode?"#f9fafb":"#111827",border:`1px solid ${t?.darkMode?"#4b5563":"#e5e7eb"}`},success:{iconTheme:{primary:"#22c55e",secondary:"#ffffff"}},error:{iconTheme:{primary:"#ef4444",secondary:"#ffffff"}}}})]})]})}a(3824)},6591:(e,t,a)=>{"use strict";a.d(t,{U0:()=>i});var r=a(4679);class s{async init(){this.db||(this.db=await (0,r.X3)(this.DB_NAME,this.DB_VERSION,{upgrade(e){let t=e.createObjectStore("leaves",{keyPath:"id"});t.createIndex("by-date","startDate"),t.createIndex("by-type","type"),e.createObjectStore("settings",{keyPath:"id"}),e.createObjectStore("balances",{keyPath:"id"}),e.createObjectStore("holidays",{keyPath:"id"});let a=e.createObjectStore("carryover",{keyPath:"id"});a.createIndex("by-type","type"),a.createIndex("by-year","year")}}))}async getLeaves(){return await this.init(),this.db.getAll("leaves")}async getLeave(e){return await this.init(),this.db.get("leaves",e)}async addLeave(e){await this.init(),await this.db.add("leaves",e)}async updateLeave(e){await this.init(),await this.db.put("leaves",e)}async deleteLeave(e){await this.init(),await this.db.delete("leaves",e)}async saveLeaves(e){for(let t of(await this.init(),await this.db.clear("leaves"),e))await this.db.add("leaves",t)}async clearLeaves(){await this.init(),await this.db.clear("leaves")}async getLeavesByYear(e){return await this.init(),(await this.getLeaves()).filter(t=>new Date(t.startDate).getFullYear()===e)}async getLeavesByType(e){return await this.init(),this.db.getAllFromIndex("leaves","by-type",e)}async getSettings(){return await this.init(),this.db.get("settings","app-settings")}async saveSettings(e){await this.init(),await this.db.put("settings",{id:"app-settings",...e})}async getBalances(){return await this.init(),await this.db.get("balances","current-balances")||[]}async saveBalances(e){await this.init(),await this.db.put("balances",{id:"current-balances",balances:e})}async getHolidays(){return await this.init(),await this.db.get("holidays","french-holidays")||[]}async saveHolidays(e){await this.init(),await this.db.put("holidays",{id:"french-holidays",holidays:e})}async getCarryoverLeaves(){try{return await this.init(),this.db.getAll("carryover")}catch(e){return console.log("Store carryover non trouv\xe9, retour d'un tableau vide:",e),[]}}async getCarryoverLeave(e){return await this.init(),this.db.get("carryover",e)}async addCarryoverLeave(e){await this.init(),await this.db.add("carryover",e)}async updateCarryoverLeave(e){await this.init(),await this.db.put("carryover",e)}async deleteCarryoverLeave(e){await this.init(),await this.db.delete("carryover",e)}async saveCarryoverLeaves(e){for(let t of(await this.init(),await this.db.clear("carryover"),e))await this.db.add("carryover",t)}async clearCarryoverLeaves(){await this.init(),await this.db.clear("carryover")}async getCarryoverLeavesByType(e){return await this.init(),this.db.getAllFromIndex("carryover","by-type",e)}async getCarryoverLeavesByYear(e){return await this.init(),this.db.getAllFromIndex("carryover","by-year",e)}async exportData(){let e=await this.getLeaves(),t=await this.getSettings(),a=await this.getBalances(),r=await this.getHolidays(),s=[];try{s=await this.getCarryoverLeaves()}catch(e){console.log("Carryover store non trouv\xe9 lors de l'export:",e),s=[]}return JSON.stringify({leaves:e,settings:t,balances:a,holidays:r,carryovers:s,exportDate:new Date().toISOString(),version:"1.0.0"},null,2)}async exportDataWithUserChoice(){try{let e=await this.exportData(),t=`leave-tracker-backup-${new Date().toISOString().split("T")[0]}.json`;if(navigator.share&&navigator.canShare){let a=new Blob([e],{type:"application/json"}),r=new File([a],t,{type:"application/json"});if(navigator.canShare({files:[r]})){await navigator.share({files:[r],title:"Leave Tracker Backup",text:`Sauvegarde Leave Tracker du ${new Date().toLocaleDateString("fr-FR")}`});return}}this.downloadFile(e,t)}catch(a){console.error("Erreur lors de l'export:",a);let e=await this.exportData(),t=`leave-tracker-backup-${new Date().toISOString().split("T")[0]}.json`;this.downloadFile(e,t)}}downloadFile(e,t){let a=new Blob([e],{type:"application/json"}),r=URL.createObjectURL(a),s=document.createElement("a");s.href=r,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)}async importData(e){try{let t=JSON.parse(e);if(!t.leaves||!Array.isArray(t.leaves))throw Error("Format de donn\xe9es invalide");for(let e of(await this.init(),await this.db.clear("leaves"),await this.db.clear("settings"),await this.db.clear("balances"),await this.db.clear("holidays"),await this.db.clear("carryover"),t.leaves))await this.addLeave(e);t.settings&&await this.saveSettings(t.settings),t.balances&&await this.saveBalances(t.balances),t.holidays&&await this.saveHolidays(t.holidays),t.carryovers&&await this.saveCarryoverLeaves(t.carryovers)}catch(e){throw console.error("Erreur lors de l'import:",e),Error("Erreur lors de l'import des donn\xe9es")}}async importDataWithFileSelection(){return new Promise((e,t)=>{let a=document.createElement("input");a.type="file",a.accept=".json",a.style.display="none",a.onchange=async r=>{let s=r.target.files?.[0];if(!s){t(Error("Aucun fichier s\xe9lectionn\xe9"));return}try{let t=await s.text();await this.importData(t),e()}catch(e){t(e)}finally{document.body.removeChild(a)}},a.oncancel=()=>{t(Error("Import annul\xe9")),document.body.removeChild(a)},document.body.appendChild(a),a.click()})}async backupToLocalStorage(){try{let e=await this.exportData();localStorage.setItem("leave-tracker-backup",e),localStorage.setItem("leave-tracker-backup-date",new Date().toISOString());let t=new Date().toISOString().split("T")[0];localStorage.setItem(`leave-tracker-backup-${t}`,e),this.cleanupOldBackups()}catch(e){console.error("Erreur lors de la sauvegarde:",e)}}async restoreFromLocalStorage(){try{let e=localStorage.getItem("leave-tracker-backup");if(e)return await this.importData(e),!0;let t=Object.keys(localStorage).filter(e=>e.startsWith("leave-tracker-backup-")).sort().reverse();if(t.length>0){let e=localStorage.getItem(t[0]);if(e)return await this.importData(e),!0}return!1}catch(e){return console.error("Erreur lors de la restauration:",e),!1}}cleanupOldBackups(){try{let e=Object.keys(localStorage).filter(e=>e.startsWith("leave-tracker-backup-")).sort().reverse();e.length>5&&e.slice(5).forEach(e=>{localStorage.removeItem(e)})}catch(e){console.error("Erreur lors du nettoyage des sauvegardes:",e)}}async getAvailableBackups(){try{let e=[],t=localStorage.getItem("leave-tracker-backup");if(t){let a=localStorage.getItem("leave-tracker-backup-date");e.push({date:a||"Unknown",size:t.length})}return Object.keys(localStorage).filter(e=>e.startsWith("leave-tracker-backup-")).sort().reverse().forEach(t=>{let a=localStorage.getItem(t);if(a){let r=t.replace("leave-tracker-backup-","");e.push({date:r,size:a.length})}}),e}catch(e){return console.error("Erreur lors de la r\xe9cup\xe9ration des sauvegardes:",e),[]}}async clearAllData(){await this.init(),await this.db.clear("leaves"),await this.db.clear("settings"),await this.db.clear("balances"),await this.db.clear("holidays"),await this.db.clear("carryover")}async getDatabaseStats(){await this.init();let e=await this.getLeaves(),t=localStorage.getItem("leave-tracker-backup-date");return{totalLeaves:e.length,totalSize:new Blob([JSON.stringify(e)]).size,lastBackup:t||void 0}}constructor(){this.db=null,this.DB_NAME="LeaveTrackerDB",this.DB_VERSION=1}}let i=new s},2029:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(8570).createProxy)(String.raw`/mnt/c/Users/AIFinesHerbes/AIFB/leave-tracker/src/app/layout.tsx#default`)},3824:()=>{}};