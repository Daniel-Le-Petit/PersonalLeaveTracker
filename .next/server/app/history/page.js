(()=>{var e={};e.id=811,e.ids=[811],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7601:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>o,pages:()=>x,routeModule:()=>h,tree:()=>c}),r(3147),r(2029),r(5866);var s=r(3191),a=r(8716),l=r(7922),i=r.n(l),d=r(5231),n={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);r.d(t,n);let c=["",{children:["history",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,3147)),"/mnt/c/Users/AIFinesHerbes/AIFB/leave-tracker/src/app/history/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,2029)),"/mnt/c/Users/AIFinesHerbes/AIFB/leave-tracker/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],x=["/mnt/c/Users/AIFinesHerbes/AIFB/leave-tracker/src/app/history/page.tsx"],o="/history/page",m={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/history/page",pathname:"/history",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7854:(e,t,r)=>{Promise.resolve().then(r.bind(r,2520))},6333:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(6557).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7358:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(6557).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},8091:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(6557).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},5047:(e,t,r)=>{"use strict";var s=r(7389);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},2520:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var s=r(326),a=r(6333),l=r(6557);let i=(0,l.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),d=(0,l.Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),n=(0,l.Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);var c=r(8091),x=r(7358),o=r(434),m=r(7577),h=r(381),g=r(1492),u=r(6591),y=r(5047);function p(){let[e,t]=(0,m.useState)([]),[r,l]=(0,m.useState)([]),[p,j]=(0,m.useState)(!0),[v,b]=(0,m.useState)(""),[k,N]=(0,m.useState)("all"),[f,w]=(0,m.useState)(new Date().getFullYear().toString()),[P,A]=(0,m.useState)("all"),C=(0,y.useRouter)(),D=async r=>{if(confirm("\xcates-vous s\xfbr de vouloir supprimer ce cong\xe9 ?"))try{let s=e.filter(e=>e.id!==r);await u.U0.saveLeaves(s),t(s),h.ZP.success("Cong\xe9 supprim\xe9 avec succ\xe8s")}catch(e){console.error("Erreur lors de la suppression:",e),h.ZP.error("Erreur lors de la suppression")}},S=e=>({cp:"CP - Cong\xe9s pay\xe9s",rtt:"RTT - R\xe9duction du temps de travail",sick:"Maladie"})[e]||e,Z=e=>({cp:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",rtt:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",sick:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"})[e]||"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";return p?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"loading-spinner h-12 w-12"})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[s.jsx("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)(o.default,{href:"/",className:"btn-secondary",children:[s.jsx(a.Z,{className:"w-4 h-4 mr-2"}),"Retour"]}),(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"\uD83D\uDCC5 Historique des cong\xe9s"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Consultez et g\xe9rez tous vos cong\xe9s"})]})]}),s.jsx("div",{className:"flex items-center space-x-4",children:(0,s.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r.length," cong\xe9",r.length>1?"s":""]})})]})})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,s.jsxs)("div",{className:"relative",children:[s.jsx(i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Rechercher...",value:v,onChange:e=>b(e.target.value),className:"input pl-10"})]}),s.jsx("div",{children:(0,s.jsxs)("select",{value:f,onChange:e=>w(e.target.value),className:"select",title:"S\xe9lectionner une ann\xe9e",children:[s.jsx("option",{value:"all",children:"Toutes les ann\xe9es"}),Array.from(new Set(e.map(e=>new Date(e.startDate).getFullYear()))).sort((e,t)=>t-e).map(e=>s.jsx("option",{value:e.toString(),children:e},e))]})}),s.jsx("div",{children:(0,s.jsxs)("select",{value:k,onChange:e=>N(e.target.value),className:"select",title:"S\xe9lectionner un type de cong\xe9",children:[s.jsx("option",{value:"all",children:"Tous les types"}),Array.from(new Set(e.map(e=>e.type))).map(e=>s.jsx("option",{value:e,children:S(e)},e))]})}),s.jsx("div",{children:(0,s.jsxs)("select",{value:P,onChange:e=>A(e.target.value),className:"select",title:"S\xe9lectionner un mode (R\xe9el/Pr\xe9visions)",children:[s.jsx("option",{value:"all",children:"Tous les modes"}),s.jsx("option",{value:"real",children:"R\xe9el"}),s.jsx("option",{value:"forecast",children:"Pr\xe9visions"})]})}),s.jsx("div",{children:(0,s.jsxs)("button",{onClick:()=>{b(""),N("all"),w(new Date().getFullYear().toString()),A("all")},className:"btn-secondary w-full",children:[s.jsx(d,{className:"w-4 h-4 mr-2"}),"R\xe9initialiser"]})})]})})}),(0,s.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.length>0?s.jsx("div",{className:"card",children:s.jsx("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"table",children:[s.jsx("thead",{className:"table-header",children:(0,s.jsxs)("tr",{className:"bg-gray-100 dark:bg-gray-800",children:[s.jsx("th",{className:"px-4 py-2 text-left text-sm font-semibold text-gray-900 dark:text-white border-r border-gray-200 dark:border-gray-700",children:"Date"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-semibold text-gray-900 dark:text-white border-r border-gray-200 dark:border-gray-700",children:"Type"}),s.jsx("th",{className:"px-4 py-2 text-center text-sm font-semibold text-gray-900 dark:text-white border-r border-gray-200 dark:border-gray-700",children:"Jours"}),s.jsx("th",{className:"px-4 py-2 text-center text-sm font-semibold text-gray-900 dark:text-white border-r border-gray-200 dark:border-gray-700",children:"Mode"}),s.jsx("th",{className:"px-4 py-2 text-center text-sm font-semibold text-gray-900 dark:text-white border-r border-gray-200 dark:border-gray-700",children:"Actions"})]})}),s.jsx("tbody",{className:"table-body",children:r.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[s.jsx("td",{className:"table-cell",children:(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsxs)("div",{className:"font-medium text-gray-900 dark:text-white",children:[(0,g.p6)(e.startDate)," - ",(0,g.p6)(e.endDate)]}),s.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:new Date(e.startDate).getFullYear()})]})}),(0,s.jsxs)("td",{className:"table-cell",children:[s.jsx("span",{className:`badge ${Z(e.type)}`,children:e.type.toUpperCase()}),e.isHalfDay&&(0,s.jsxs)("span",{className:"ml-2 text-xs text-gray-500 dark:text-gray-400",children:["(","morning"===e.halfDayType?"Matin":"Apr\xe8s-midi",")"]})]}),(0,s.jsxs)("td",{className:"table-cell",children:[s.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:e.workingDays}),(0,s.jsxs)("span",{className:"text-gray-500 dark:text-gray-400 ml-1",children:["jour",e.workingDays>1?"s":""]})]}),s.jsx("td",{className:"table-cell",children:s.jsx("span",{className:`badge ${e.isForecast?"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"}`,children:e.isForecast?"Pr\xe9vision":"R\xe9el"})}),s.jsx("td",{className:"table-cell",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>{C.push(`/edit/${e.id}`)},className:"text-primary-600 hover:text-primary-800 dark:text-primary-400 dark:hover:text-primary-200",title:"Modifier",children:s.jsx(n,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>D(e.id),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-200",title:"Supprimer",children:s.jsx(c.Z,{className:"w-4 h-4"})})]})})]},e.id))})]})})}):s.jsx("div",{className:"card",children:s.jsx("div",{className:"card-body",children:(0,s.jsxs)("div",{className:"text-center py-12",children:[s.jsx(x.Z,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:0===e.length?"Aucun cong\xe9 enregistr\xe9":"Aucun cong\xe9 trouv\xe9"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:0===e.length?"Commencez par ajouter votre premier cong\xe9":"Essayez de modifier vos crit\xe8res de recherche"}),0===e.length&&(0,s.jsxs)(o.default,{href:"/add",className:"btn-primary",children:[s.jsx(x.Z,{className:"w-4 h-4 mr-2"}),"Ajouter un cong\xe9"]})]})})}),r.length>0&&s.jsx("div",{className:"mt-8",children:(0,s.jsxs)("div",{className:"card",children:[s.jsx("div",{className:"card-header",children:s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"\uD83D\uDCCA Statistiques"})}),s.jsx("div",{className:"card-body",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.length}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Cong\xe9",r.length>1?"s":""]})]}),(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.reduce((e,t)=>e+t.workingDays,0)}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Jours totaux"})]}),(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:Math.round(r.reduce((e,t)=>e+t.workingDays,0)/r.length*10)/10}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Jours moyens"})]}),(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:new Set(r.map(e=>e.type)).size}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Types utilis\xe9s"})]})]})})]})})]})]})}},3147:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(8570).createProxy)(String.raw`/mnt/c/Users/AIFinesHerbes/AIFB/leave-tracker/src/app/history/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[78,434,442,331,492],()=>r(7601));module.exports=s})();