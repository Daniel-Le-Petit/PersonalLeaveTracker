(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[853],{7830:function(e,a,t){Promise.resolve().then(t.bind(t,3379))},3379:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return b}});var s=t(7437),r=t(2660),l=t(3229),i=t(6221),n=t(9397),d=t(1723),c=t(1047),o=t(4794),m=t(8728),x=t(7648),u=t(2265),p=t(9064),h=t(9031),g=t(4569);function b(){var e;let[a,t]=(0,u.useState)({type:"cp",startDate:"",endDate:"",notes:"",isHalfDay:!1,halfDayType:"morning",isForecast:!1}),[b,y]=(0,u.useState)(0),[v,j]=(0,u.useState)(!1),[f,D]=(0,u.useState)(null);(0,u.useEffect)(()=>{if(a.startDate&&a.endDate){let e=(0,h.XW)(a.startDate),t=(0,h.XW)(a.endDate);if(e&&t){let s=new Date(e),r=new Date(t);s<=r?(y((0,h.d)(e,t,(0,h.hJ)(new Date(e).getFullYear()),a.isHalfDay,a.halfDayType)),"rtt"===a.type?D((0,h.sj)(s,r)):D(null)):(y(0),D(null))}else y(0),D(null)}},[a.startDate,a.endDate,a.isHalfDay,a.halfDayType,a.type]);let N=async e=>{if(e.preventDefault(),!a.startDate||!a.endDate){p.ZP.error("Veuillez saisir les dates de d\xe9but et de fin");return}if(!(0,h.Y)(a.startDate)){p.ZP.error("Format de date de d\xe9but invalide. Utilisez DD/MM/YYYY (ex: 02/01/2024)");return}if(!(0,h.Y)(a.endDate)){p.ZP.error("Format de date de fin invalide. Utilisez DD/MM/YYYY (ex: 03/01/2024)");return}let s=(0,h.XW)(a.startDate),r=(0,h.XW)(a.endDate);if(new Date(s)>new Date(r)){p.ZP.error("La date de d\xe9but ne peut pas \xeatre post\xe9rieure \xe0 la date de fin");return}if(b<=0){p.ZP.error("La p\xe9riode s\xe9lectionn\xe9e doit contenir au moins un jour ouvrable");return}if("rtt"===a.type){let e=new Date(s),a=new Date(r),t=(0,h.sj)(e,a);if(t.totalAvailable<b){let e=t.details.filter(e=>!e.canTake).map(e=>"".concat(e.month,"/").concat(e.year)).join(", ");p.ZP.error("Vous ne pouvez pas prendre ".concat(b," jours de RTT pour cette p\xe9riode. RTT non disponibles pour : ").concat(e));return}}j(!0);try{let e={id:Date.now().toString(),type:a.type,startDate:s,endDate:r,workingDays:b,notes:a.notes.trim(),isHalfDay:a.isHalfDay,halfDayType:a.halfDayType,isForecast:a.isForecast,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},l=await g.U0.getLeaves();await g.U0.saveLeaves([...l,e]),p.ZP.success("Cong\xe9 ajout\xe9 avec succ\xe8s"),t({type:"cp",startDate:"",endDate:"",notes:"",isHalfDay:!1,halfDayType:"morning",isForecast:!1}),y(0)}catch(e){console.error("Erreur lors de l'ajout du cong\xe9:",e),p.ZP.error("Erreur lors de l'ajout du cong\xe9")}finally{j(!1)}},k=[{value:"cp",label:"CP - Cong\xe9s pay\xe9s"},{value:"rtt",label:"RTT - R\xe9duction du temps de travail"},{value:"cet",label:"CET - Compte \xe9pargne temps"}];return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,s.jsx)("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:(0,s.jsx)("div",{className:"max-w-4xl mx-auto header-mobile",children:(0,s.jsx)("div",{className:"flex justify-between items-center",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)(x.default,{href:"/",className:"btn-secondary btn-mobile",children:[(0,s.jsx)(r.Z,{className:"w-4 h-4 mr-2"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Retour"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"header-title-mobile text-gray-900 dark:text-white",children:"➕ Ajouter un cong\xe9"}),(0,s.jsx)("p",{className:"header-subtitle-mobile text-gray-600 dark:text-gray-400",children:"Cr\xe9ez une nouvelle entr\xe9e de cong\xe9"})]})]})})})}),(0,s.jsx)("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 mobile-safe-area",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"card-header",children:(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"\uD83D\uDCDD Informations du cong\xe9"})}),(0,s.jsx)("div",{className:"card-body",children:(0,s.jsxs)("form",{onSubmit:N,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type de cong\xe9 *"}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 touch-button",children:k.map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>t({...a,type:e.value}),className:"p-4 rounded-lg border-2 transition-all duration-200 ".concat(a.type===e.value?"border-2 shadow-lg transform scale-105":"border-gray-200 hover:border-gray-300"," ").concat("cp"===e.value?"bg-blue-50 border-blue-300 hover:bg-blue-100"+(a.type===e.value?" bg-blue-100 border-blue-500":""):"rtt"===e.value?"bg-green-50 border-green-300 hover:bg-green-100"+(a.type===e.value?" bg-green-100 border-green-500":""):"cet"===e.value?"bg-purple-50 border-purple-300 hover:bg-purple-100"+(a.type===e.value?" bg-purple-100 border-purple-500":""):"bg-gray-50 border-gray-300 hover:bg-gray-100"+(a.type===e.value?" bg-gray-100 border-gray-500":"")),children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl mb-2 ".concat("cp"===e.value?"text-blue-600":"rtt"===e.value?"text-green-600":"cet"===e.value?"text-purple-600":"text-gray-600"),children:"cp"===e.value?"\uD83C\uDFD6️":"rtt"===e.value?"\uD83D\uDCC5":"cet"===e.value?"\uD83C\uDFE5":"\uD83D\uDCCB"}),(0,s.jsx)("div",{className:"font-medium text-sm ".concat("cp"===e.value?"text-blue-700":"rtt"===e.value?"text-green-700":"cet"===e.value?"text-purple-700":"text-gray-700"),children:e.label})]})},e.value))})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 form-mobile",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Date de d\xe9but *"}),(0,s.jsx)("input",{type:"text",value:a.startDate,onChange:e=>t({...a,startDate:e.target.value}),className:"input input-mobile",required:!0,placeholder:"DD/MM/YYYY (ex: 02/01/2024)"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Date de fin *"}),(0,s.jsx)("input",{type:"text",value:a.endDate,onChange:e=>t({...a,endDate:e.target.value}),className:"input input-mobile",required:!0,placeholder:"DD/MM/YYYY (ex: 03/01/2024)"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"flex items-center space-x-4",children:(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:a.isHalfDay,onChange:e=>t({...a,isHalfDay:e.target.checked}),className:"rounded border-gray-300 text-primary-600 shadow-sm focus:border-primary-300 focus:ring focus:ring-primary-200 focus:ring-opacity-50"}),(0,s.jsx)("span",{className:"ml-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:"Demi-journ\xe9e"})]})}),a.isHalfDay&&(0,s.jsxs)("div",{className:"mt-4 ml-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Type de demi-journ\xe9e"}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"radio",value:"morning",checked:"morning"===a.halfDayType,onChange:e=>t({...a,halfDayType:e.target.value}),className:"text-primary-600 focus:ring-primary-500"}),(0,s.jsx)("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Matin"})]}),(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"radio",value:"afternoon",checked:"afternoon"===a.halfDayType,onChange:e=>t({...a,halfDayType:e.target.value}),className:"text-primary-600 focus:ring-primary-500"}),(0,s.jsx)("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Apr\xe8s-midi"})]})]})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"isForecast",className:"form-label",children:"Mode"}),(0,s.jsxs)("select",{id:"isForecast",value:a.isForecast?"true":"false",onChange:e=>t({...a,isForecast:"true"===e.target.value}),className:"form-select",title:"S\xe9lectionner le mode du cong\xe9",children:[(0,s.jsx)("option",{value:"false",children:"R\xe9el (cong\xe9 effectivement pris)"}),(0,s.jsx)("option",{value:"true",children:"Pr\xe9vision (cong\xe9 planifi\xe9)"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notes (optionnel)"}),(0,s.jsx)("textarea",{value:a.notes,onChange:e=>t({...a,notes:e.target.value}),rows:3,className:"input input-mobile",placeholder:"Ajoutez des notes ou commentaires sur ce cong\xe9..."})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsxs)("button",{type:"submit",disabled:v||b<=0,className:"btn-primary btn-mobile-large touch-button",children:[(0,s.jsx)(l.Z,{className:"w-4 h-4 mr-2"}),v?"Ajout en cours...":"Ajouter le cong\xe9"]})})]})})]})}),(0,s.jsxs)("div",{className:"lg:col-span-1",children:[(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"card-header",children:(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"\uD83D\uDCCA R\xe9sum\xe9"})}),(0,s.jsxs)("div",{className:"card-body space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Type de cong\xe9"}),(0,s.jsx)("div",{className:"mt-1",children:k.find(e=>e.value===a.type)&&(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-lg ".concat("cp"===a.type?"text-blue-600":"rtt"===a.type?"text-green-600":"cet"===a.type?"text-purple-600":"text-gray-600"),children:"cp"===a.type?"\uD83C\uDFD6️":"rtt"===a.type?"\uD83D\uDCC5":"cet"===a.type?"\uD83C\uDFE5":"\uD83D\uDCCB"}),(0,s.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ".concat("cp"===a.type?"bg-blue-100 text-blue-800 border border-blue-200":"rtt"===a.type?"bg-green-100 text-green-800 border border-green-200":"cet"===a.type?"bg-purple-100 text-purple-800 border border-purple-200":"bg-gray-100 text-gray-800 border border-gray-200"),children:null===(e=k.find(e=>e.value===a.type))||void 0===e?void 0:e.label.split(" - ")[0]})]})})]}),a.startDate&&a.endDate&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"P\xe9riode"}),(0,s.jsxs)("div",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:[(0,h.p6)((0,h.XW)(a.startDate))," - ",(0,h.p6)((0,h.XW)(a.endDate))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Jours ouvrables"}),(0,s.jsxs)("div",{className:"mt-1",children:[(0,s.jsx)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:b}),(0,s.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400 ml-1",children:["jour",b>1?"s":""]})]})]}),a.isHalfDay&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Demi-journ\xe9e"}),(0,s.jsx)("div",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:"morning"===a.halfDayType?"Matin":"Apr\xe8s-midi"})]}),a.startDate&&a.endDate&&(0,s.jsx)("div",{className:"mt-4 p-3 rounded-lg bg-gray-50 dark:bg-gray-700",children:b>0?(0,s.jsx)("div",{className:"text-sm text-green-600 dark:text-green-400",children:"✅ P\xe9riode valide"}):(0,s.jsx)("div",{className:"text-sm text-red-600 dark:text-red-400",children:"❌ P\xe9riode invalide"})})]})]}),(0,s.jsxs)("div",{className:"card mt-6",children:[(0,s.jsx)("div",{className:"card-header",children:(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"\uD83D\uDCA1 Conseils"})}),(0,s.jsx)("div",{className:"card-body",children:(0,s.jsxs)("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-2",children:[(0,s.jsx)("li",{children:"• Les weekends et jours f\xe9ri\xe9s ne sont pas comptabilis\xe9s"}),(0,s.jsx)("li",{children:"• Une demi-journ\xe9e compte pour 0.5 jour ouvrable"}),(0,s.jsx)("li",{children:"• Vous pouvez modifier vos cong\xe9s depuis l'historique"}),(0,s.jsx)("li",{children:"• Les notes sont optionnelles mais utiles"})]})})]})]})]})}),(0,s.jsx)("nav",{className:"mobile-nav md:hidden",children:(0,s.jsxs)("div",{className:"mobile-nav-container",children:[(0,s.jsxs)(x.default,{href:"/",className:"mobile-nav-item-inactive",children:[(0,s.jsx)(i.Z,{className:"mobile-nav-icon"}),(0,s.jsx)("span",{className:"mobile-nav-label",children:"Dashboard"})]}),(0,s.jsxs)(x.default,{href:"/add",className:"mobile-nav-item-active",children:[(0,s.jsx)(n.Z,{className:"mobile-nav-icon"}),(0,s.jsx)("span",{className:"mobile-nav-label",children:"Ajouter"})]}),(0,s.jsxs)(x.default,{href:"/history",className:"mobile-nav-item-inactive",children:[(0,s.jsx)(d.Z,{className:"mobile-nav-icon"}),(0,s.jsx)("span",{className:"mobile-nav-label",children:"Historique"})]}),(0,s.jsxs)(x.default,{href:"/calendar",className:"mobile-nav-item-inactive",children:[(0,s.jsx)(c.Z,{className:"mobile-nav-icon"}),(0,s.jsx)("span",{className:"mobile-nav-label",children:"Calendrier"})]}),(0,s.jsxs)(x.default,{href:"/carryover",className:"mobile-nav-item-inactive",children:[(0,s.jsx)(o.Z,{className:"mobile-nav-icon"}),(0,s.jsx)("span",{className:"mobile-nav-label",children:"Reliquats"})]}),(0,s.jsxs)(x.default,{href:"/settings",className:"mobile-nav-item-inactive",children:[(0,s.jsx)(m.Z,{className:"mobile-nav-icon"}),(0,s.jsx)("span",{className:"mobile-nav-label",children:"R\xe9glages"})]})]})})]})}}},function(e){e.O(0,[216,980,744],function(){return e(e.s=7830)}),_N_E=e.O()}]);