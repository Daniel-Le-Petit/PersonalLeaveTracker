(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[329],{9234:function(e,t,a){Promise.resolve().then(a.bind(a,6571))},6571:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return x}});var s=a(7437),r=a(2660),l=a(7648),n=a(2265),c=a(9064),d=a(9031),i=a(4569);function x(){let[e,t]=(0,n.useState)([]),[a,x]=(0,n.useState)(!0),[m,o]=(0,n.useState)(new Date);(0,n.useEffect)(()=>{g()},[]);let g=async()=>{try{let e=await i.U0.getLeaves();t(e)}catch(e){console.error("Erreur lors du chargement des cong\xe9s:",e),c.ZP.error("Erreur lors du chargement des cong\xe9s")}finally{x(!1)}},h=e=>({cp:"bg-blue-500",rtt:"bg-green-500",sick:"bg-orange-500"})[e]||"bg-gray-500",u=e=>({cp:"CP",rtt:"RTT",sick:"Maladie"})[e]||e,y=e=>{let t=e.getFullYear(),a=e.getMonth(),s=new Date(t,a,1);return{daysInMonth:new Date(t,a+1,0).getDate(),startingDay:s.getDay()}},j=t=>{let a=t.toISOString().split("T")[0];return e.filter(e=>{let t=new Date(e.startDate),s=new Date(e.endDate),r=new Date(a);return r>=t&&r<=s})},N=e=>{let t=e.getDay();return 0===t||6===t};return a?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"loading-spinner h-12 w-12"})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,s.jsx)("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsx)("div",{className:"flex justify-between items-center py-6",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)(l.default,{href:"/",className:"btn-secondary",children:[(0,s.jsx)(r.Z,{className:"w-4 h-4 mr-2"}),"Retour"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"\uD83D\uDCC5 Calendrier des cong\xe9s"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Visualisez vos cong\xe9s dans un calendrier"})]})]})})})}),(0,s.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsx)("div",{className:"card mb-8",children:(0,s.jsx)("div",{className:"card-body",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("button",{onClick:()=>{o(new Date(m.getFullYear(),m.getMonth()-1,1))},className:"btn-secondary",children:"← Pr\xe9c\xe9dent"}),(0,s.jsx)("button",{onClick:()=>{o(new Date)},className:"btn-primary",children:"Aujourd'hui"}),(0,s.jsx)("button",{onClick:()=>{o(new Date(m.getFullYear(),m.getMonth()+1,1))},className:"btn-secondary",children:"Suivant →"})]}),(0,s.jsxs)("div",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:[["Janvier","F\xe9vrier","Mars","Avril","Mai","Juin","Juillet","Ao\xfbt","Septembre","Octobre","Novembre","D\xe9cembre"][m.getMonth()]," ",m.getFullYear()]})]})})}),(0,s.jsx)("div",{className:"card",children:(0,s.jsxs)("div",{className:"card-body",children:[(0,s.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-4",children:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"].map(e=>(0,s.jsx)("div",{className:"text-center text-sm font-medium text-gray-600 dark:text-gray-400 py-2",children:e},e))}),(0,s.jsx)("div",{className:"grid grid-cols-7 gap-1",children:(()=>{let{daysInMonth:e,startingDay:t}=y(m),a=[];for(let e=0;e<t;e++)a.push((0,s.jsx)("div",{className:"calendar-day bg-gray-50 dark:bg-gray-800"},"empty-".concat(e)));for(let t=1;t<=e;t++){let e=new Date(m.getFullYear(),m.getMonth(),t),r=j(e),l=N(e);a.push((0,s.jsxs)("div",{className:"calendar-day ".concat(l?"calendar-day-weekend":""," ").concat(r.length>0?"bg-blue-50 dark:bg-blue-900/20":""),children:[(0,s.jsx)("div",{className:"text-sm font-medium mb-1",children:t}),r.map((e,t)=>(0,s.jsx)("div",{className:"text-xs p-1 rounded mb-1 text-white ".concat(h(e.type)),title:"".concat(u(e.type),": ").concat((0,d.p6)(e.startDate)," - ").concat((0,d.p6)(e.endDate)),children:u(e.type)},"".concat(e.id,"-").concat(t)))]},t))}return a})()})]})}),(0,s.jsxs)("div",{className:"card mt-8",children:[(0,s.jsx)("div",{className:"card-header",children:(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"L\xe9gende"})}),(0,s.jsx)("div",{className:"card-body",children:(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[{type:"cp",label:"CP - Cong\xe9s pay\xe9s"},{type:"rtt",label:"RTT - R\xe9duction du temps de travail"},{type:"sick",label:"Maladie"}].map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 rounded ".concat(h(e.type))}),(0,s.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e.label})]},e.type))})})]}),(0,s.jsxs)("div",{className:"card mt-8",children:[(0,s.jsx)("div",{className:"card-header",children:(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Statistiques du mois"})}),(0,s.jsx)("div",{className:"card-body",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.filter(e=>{let t=new Date(e.startDate),a=new Date(e.endDate),s=new Date(m.getFullYear(),m.getMonth(),1);return t<=new Date(m.getFullYear(),m.getMonth()+1,0)&&a>=s}).length}),(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Cong\xe9s ce mois"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.filter(e=>{let t=new Date(e.startDate),a=new Date(e.endDate),s=new Date(m.getFullYear(),m.getMonth(),1);return t<=new Date(m.getFullYear(),m.getMonth()+1,0)&&a>=s}).reduce((e,t)=>e+t.workingDays,0)}),(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Jours de cong\xe9"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:new Set(e.filter(e=>{let t=new Date(e.startDate),a=new Date(e.endDate),s=new Date(m.getFullYear(),m.getMonth(),1);return t<=new Date(m.getFullYear(),m.getMonth()+1,0)&&a>=s}).map(e=>e.type)).size}),(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Types de cong\xe9"})]})]})})]})]})]})}}},function(e){e.O(0,[216,980,744],function(){return e(e.s=9234)}),_N_E=e.O()}]);